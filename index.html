<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TheBestHarrison's official site featuring latest GitHub projects, YouTube playlist, and social links.">
    <meta name="keywords" content="GitHub, YouTube, Twitch, Portfolio">
    <title>TBCreates</title>
    <link rel="icon" href="LOGO.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Add modern, bold, and readable fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900;700;400&family=Fira+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Animate.css for animation effects -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
      html, body {
        font-family: 'Inter', 'Montserrat', 'Fira Mono', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      }
      .main-title {
        font-family: 'Montserrat', ui-sans-serif, system-ui, sans-serif;
        letter-spacing: -0.04em;
      }
      .main-subtitle {
        font-family: 'Fira Mono', 'Montserrat', monospace, sans-serif;
        letter-spacing: 0.04em;
      }
      .section-title {
        font-family: 'Montserrat', ui-sans-serif, system-ui, sans-serif;
        font-weight: 800;
        letter-spacing: -0.02em;
      }
      /* Animated underline for nav links */
      .nav-link {
        position: relative;
        overflow: hidden;
      }
      .nav-underline {
        display: block;
        position: absolute;
        left: 50%;
        bottom: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, #22d3ee 0%, #22c55e 100%);
        transition: width 0.3s cubic-bezier(.4,0,.2,1), left 0.3s cubic-bezier(.4,0,.2,1);
      }
      .nav-link:hover .nav-underline,
      .nav-link:focus .nav-underline {
        width: 100%;
        left: 0;
      }
      #discordProfile .dropdown-visible {
        opacity: 1 !important;
        pointer-events: auto !important;
        transition: opacity 0.2s;
        z-index: 100;
        display: block !important;
      }
      #discordProfile .dropdown-hidden {
        opacity: 0 !important;
        pointer-events: none !important;
        transition: opacity 0.2s;
        z-index: 100;
        display: none !important;
      }
      .fade-page {
        opacity: 1;
        transition: opacity 0.4s cubic-bezier(.4,0,.2,1);
      }
      .fade-page.fade-out {
        opacity: 0;
        pointer-events: none;
      }
      /* Accessibility: focus ring for interactive elements */
      button:focus, a:focus, input:focus {
        outline: 2px solid #22d3ee;
        outline-offset: 2px;
      }
      /* Responsive grid improvements */
      @media (max-width: 640px) {
        .main-grid {
          grid-template-columns: 1fr !important;
        }
      }
    </style>
</head>
<body class="bg-gradient-to-br from-[#10151c] via-[#18181b] to-[#0a0a0a] min-h-screen text-white font-sans antialiased flex flex-col fade-page" id="fadePage">

  <!-- NAVBAR -->
  <header class="w-full flex justify-center pt-6 pb-2">
    <nav class="bg-[#191922]/95 backdrop-blur-lg rounded-2xl border border-[#232323] shadow-xl w-full max-w-6xl px-4 sm:px-10 py-4 flex items-center justify-between">
      <!-- Logo/Brand -->
      <a href="index.html" class="flex items-center space-x-3 group focus:outline-none focus:ring-2 focus:ring-green-400 rounded-xl">
        <img src="LOGO.png" alt="Logo" class="w-10 h-10 transition-transform group-hover:scale-105">
        <span class="font-bold text-2xl tracking-wide bg-gradient-to-r from-green-400 via-blue-400 to-purple-400 bg-clip-text text-transparent group-hover:from-green-300 group-hover:to-purple-300 transition">TBCreates</span>
      </a>
      <!-- Centered Nav Links -->
      <div class="flex-1 flex justify-center">
        <nav class="flex space-x-8 text-base font-medium">
          <a href="index.html" class="nav-link text-gray-300 hover:text-green-400 transition relative border-b-2 border-green-400 pb-1 focus:outline-none focus:ring-2 focus:ring-green-400 rounded-xl">
            Home
            <span class="nav-underline"></span>
          </a>
          <a href="Events.html" class="nav-link text-gray-300 hover:text-green-400 transition relative focus:outline-none focus:ring-2 focus:ring-green-400 rounded-xl">
            Events
            <span class="nav-underline"></span>
          </a>
          <a href="https://tbcreates.the-best.uk/" target="_blank" rel="noopener" class="nav-link text-gray-300 hover:text-green-400 transition relative focus:outline-none focus:ring-2 focus:ring-green-400 rounded-xl">
            Discord
            <span class="nav-underline"></span>
          </a>
        </nav>
      </div>
      <!-- Discord login/profile (right) -->
      <nav class="flex items-center space-x-4 ml-auto" id="discordProfileNav">
        <button id="discordLoginBtn" class="bg-[#5865F2] hover:bg-[#4752c4] text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2 transition focus:outline-none focus:ring-2 focus:ring-blue-400">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.369a19.791 19.791 0 0 0-16.634 0A2.285 2.285 0 0 0 2 6.477v11.046a2.285 2.285 0 0 0 1.683 2.108 19.791 19.791 0 0 0 16.634 0A2.285 2.285 0 0 0 22 17.523V6.477a2.285 2.285 0 0 0-1.683-2.108zM9.545 15.568V8.432l6.545 3.568-6.545 3.568z"/></svg>
          Login with Discord
        </button>
        <div id="discordProfile" class="hidden relative flex items-center gap-2">
          <img id="discordAvatar" src="" alt="Avatar" class="w-8 h-8 rounded-full border-2 border-[#5865F2] cursor-pointer select-none" aria-haspopup="true" aria-expanded="false" tabindex="0">
          <span id="discordUsername" class="font-semibold text-white cursor-pointer select-none" aria-haspopup="true" aria-expanded="false" tabindex="0"></span>
          <!-- Dropdown -->
          <div id="discordDropdown" class="absolute right-0 top-12 min-w-[140px] bg-[#232323] border border-[#333] rounded-xl shadow-lg py-2 dropdown-hidden z-50" role="menu">
            <button id="discordLogoutBtn" class="w-full text-left px-4 py-2 text-red-400 hover:bg-[#18181b] hover:text-red-300 transition font-semibold" role="menuitem">Logout</button>
          </div>
        </div>
      </nav>
    </nav>
  </header>

  <!-- MAIN CONTENT -->
  <main class="flex-1 w-full flex flex-col items-center px-2 sm:px-4">
    <section class="w-full max-w-5xl mt-10">
      <h1
        class="mb-12 text-center animate__animated animate__fadeInDown"
        style="line-height: 1.05;"
      >
        <span
          class="main-title block text-[clamp(3.5rem,12vw,8.5rem)] font-extrabold bg-gradient-to-r from-green-400 via-blue-400 to-purple-400 bg-clip-text text-transparent drop-shadow-[0_12px_64px_rgba(34,197,94,0.45)] tracking-tight animate__animated animate__pulse animate__infinite"
          style="text-shadow: 0 12px 64px rgba(34,197,94,0.45);"
        >
          TBCreates
        </span>
        <span
          class="main-subtitle block text-2xl sm:text-4xl md:text-5xl font-semibold mt-6 bg-gradient-to-r from-blue-400 via-green-400 to-purple-400 bg-clip-text text-transparent animate__animated animate__fadeInUp animate__delay-1s"
        >
          The Best of Harrison's Creations
        </span>
      </h1>
      <div class="grid main-grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- YouTube Playlist -->
        <div class="bg-[#191922]/90 rounded-2xl border border-[#232323] shadow-xl flex flex-col items-center p-6 hover:shadow-2xl transition group">
          <h2 class="section-title text-2xl font-bold mb-4 text-blue-300">Latest YouTube Playlist</h2>
          <div class="w-full aspect-video rounded-xl overflow-hidden shadow-lg mb-4">
            <iframe 
              src="https://www.youtube.com/embed?listType=playlist&list=PLy2Jz8RwRSBEjJebi1g6nEejdXwbPaRzD" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen
              class="w-full h-full">
            </iframe>
          </div>
          <a href="https://youtube.com/@thebestharrison1221" target="_blank" class="mt-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold shadow transition focus:outline-none focus:ring-2 focus:ring-blue-400">Visit Channel</a>
        </div>
        <!-- Latest GitHub Repo -->
        <div class="bg-[#191922]/90 rounded-2xl border border-[#232323] shadow-xl flex flex-col items-center p-6 hover:shadow-2xl transition group" id="github-repo">
          <h2 class="section-title text-2xl font-bold mb-4 text-green-300">Most Recent Repo</h2>
          <div id="github-repo-content" class="w-full flex flex-col items-center">
            <p class="text-gray-400">Loading...</p>
          </div>
        </div>
        <!-- Placeholder 1 -->
        <div class="bg-[#191922]/90 rounded-2xl border border-[#232323] shadow-xl flex flex-col items-center justify-center p-6 min-h-[200px] hover:shadow-2xl transition group">
          <h2 class="section-title text-xl font-semibold text-purple-300 mb-2">Coming Soon</h2>
          <p class="text-gray-400">More content will be added here soon!</p>
        </div>
        <!-- Placeholder 2 -->
        <div class="bg-[#191922]/90 rounded-2xl border border-[#232323] shadow-xl flex flex-col items-center justify-center p-6 min-h-[200px] hover:shadow-2xl transition group">
          <h2 class="section-title text-xl font-semibold text-purple-300 mb-2">Stay Tuned</h2>
          <p class="text-gray-400">Follow on socials for updates and new projects.</p>
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="bg-[#18181b] border-t border-[#232323] mt-16 py-10 text-gray-300 rounded-t-3xl shadow-2xl">
    <div class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between gap-10">
      <!-- Left: Logo & Brand -->
      <div class="flex items-center gap-4 mb-8 md:mb-0">
        <img src="LOGO.png" class="w-12 h-12 rounded-2xl shadow-lg border-2 border-[#232323] bg-[#232323]/30" alt="Logo" />
        <div>
          <span class="font-extrabold text-white text-2xl tracking-wide">TBCreates</span>
          <div class="text-xs text-gray-400 mt-1">© 2025</div>
        </div>
      </div>
      <!-- Center: Socials -->
      <div class="flex flex-col items-center gap-3">
        <h4 class="text-white font-semibold text-lg mb-1 tracking-wide">Connect with me</h4>
        <div class="flex gap-6">
          <a href="https://tbcreates.the-best.uk/" target="_blank" class="hover:text-green-400 transition flex items-center gap-2 px-3 py-2 rounded-lg bg-[#232323]/50 hover:bg-[#232323]/80 shadow">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.369a19.791 19.791 0 0 0-16.634 0A2.285 2.285 0 0 0 2 6.477v11.046a2.285 2.285 0 0 0 1.683 2.108 19.791 19.791 0 0 0 16.634 0A2.285 2.285 0 0 0 22 17.523V6.477a2.285 2.285 0 0 0-1.683-2.108zM9.545 15.568V8.432l6.545 3.568-6.545 3.568z"/></svg>
            <span class="font-medium">Discord</span>
          </a>
          <a href="https://twitch.tv/thebestharrison1221" target="_blank" class="hover:text-purple-400 transition flex items-center gap-2 px-3 py-2 rounded-lg bg-[#232323]/50 hover:bg-[#232323]/80 shadow">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M21 2.5a2.5 2.5 0 0 1 2.5 2.5v14a2.5 2.5 0 0 1-2.5 2.5h-18A2.5 2.5 0 0 1 .5 19V5A2.5 2.5 0 0 1 3 2.5h18zm-9 3.5v12l8-6-8-6z"/></svg>
            <span class="font-medium">Twitch</span>
          </a>
          <a href="https://youtube.com/@thebestharrison1221" target="_blank" class="hover:text-red-400 transition flex items-center gap-2 px-3 py-2 rounded-lg bg-[#232323]/50 hover:bg-[#232323]/80 shadow">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M21.8 8.001s-.2-1.4-.8-2c-.7-.8-1.5-.8-1.9-.9C16.1 5 12 5 12 5h-.1s-4.1 0-7.1.1c-.4 0-1.2.1-1.9.9-.6.6-.8 2-.8 2S2 9.6 2 11.2v1.6c0 1.6.2 3.2.2 3.2s.2 1.4.8 2c.7.8 1.7.8 2.1.9C7.9 19 12 19 12 19s4.1 0 7.1-.1c.4 0 1.2-.1 1.9-.9.6-.6.8-2 .8-2s.2-1.6.2-3.2v-1.6c0-1.6-.2-3.2-.2-3.2zM10 15V9l6 3-6 3z"/></svg>
            <span class="font-medium">YouTube</span>
          </a>
          <a href="https://github.com/Thebestharrison1221" target="_blank" class="hover:text-blue-400 transition flex items-center gap-2 px-3 py-2 rounded-lg bg-[#232323]/50 hover:bg-[#232323]/80 shadow">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.867 8.166 6.839 9.489.5.092.682-.217.682-.483 0-.237-.009-.868-.014-1.703-2.782.604-3.369-1.342-3.369-1.342-.454-1.154-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.529 2.341 1.088 2.91.832.091-.647.35-1.088.636-1.339-2.221-.253-4.555-1.111-4.555-4.945 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.272.098-2.65 0 0 .84-.269 2.75 1.025A9.564 9.564 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.294 2.748-1.025 2.748-1.025.546 1.378.202 2.397.1 2.65.64.699 1.028 1.592 1.028 2.683 0 3.842-2.337 4.688-4.566 4.937.359.309.678.919.678 1.852 0 1.336-.012 2.417-.012 2.747 0 .268.18.579.688.481C19.135 20.163 22 16.417 22 12c0-5.523-4.477-10-10-10z"/></svg>
            <span class="font-medium">GitHub</span>
          </a>
        </div>
      </div>
      <!-- Right: Legal & Credits -->
      <div class="text-xs text-gray-400 text-center md:text-right max-w-xs leading-relaxed">
        <span class="block mb-2">Not affiliated with Mojang or Microsoft.</span>
        <span class="block">Made with <span class="text-pink-400">♥</span> by <span class="font-semibold text-white">TheBestHarrison</span>.</span>
        <span class="block mt-2">
          <a href="mailto:admin@the-best.uk" class="underline hover:text-blue-400 transition">Contact Me</a>
        </span>
      </div>
    </div>
  </footer>

  <!-- GitHub Repo Fetch Script -->
  <script>
  // 1. Add a loading spinner for GitHub repo fetch
  function showRepoLoading() {
    document.getElementById('github-repo-content').innerHTML = `
      <div class="flex flex-col items-center">
        <svg class="animate-spin h-8 w-8 text-green-400 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
        </svg>
        <p class="text-gray-400">Loading latest repository...</p>
      </div>
    `;
  }
  showRepoLoading();

  async function fetchLatestRepo() {
    const username = "Thebestharrison1221";
    try {
      const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=1`);
      if (!response.ok) throw new Error("Failed to fetch repositories.");
      const data = await response.json();

      if (data.length > 0) {
        const repo = data[0];
        document.getElementById('github-repo-content').innerHTML = `
          <h3 class="text-lg font-semibold text-blue-200 mb-2">${repo.name}</h3>
          <p class="text-gray-400 mb-2">${repo.description ? repo.description : ''}</p>
          <div class="flex gap-2 mb-2">
            <span class="bg-[#232323] text-green-300 px-2 py-1 rounded text-xs">${repo.language || 'N/A'}</span>
            <span class="bg-[#232323] text-yellow-300 px-2 py-1 rounded text-xs">★ ${repo.stargazers_count}</span>
          </div>
          <a href="${repo.html_url}" target="_blank" class="inline-block mt-2 px-4 py-2 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white rounded-lg font-semibold shadow transition">View Project</a>
        `;
      } else {
        document.getElementById('github-repo-content').innerHTML = "<p class='text-gray-400'>No repositories found.</p>";
      }
    } catch (error) {
      document.getElementById('github-repo-content').innerHTML = "<p class='text-red-400'>Error loading repository. <button onclick='fetchLatestRepo()' class='underline text-blue-400'>Retry</button></p>";
      console.error("Error fetching GitHub data:", error);
    }
  }
  fetchLatestRepo();

  // 2. Accessibility: Add ARIA attributes to dropdown triggers
  const discordLoginBtn = document.getElementById('discordLoginBtn');
  const discordProfile = document.getElementById('discordProfile');
  const discordUsername = document.getElementById('discordUsername');
  const discordAvatar = document.getElementById('discordAvatar');
  const discordLogoutBtn = document.getElementById('discordLogoutBtn');
  const discordDropdown = document.getElementById('discordDropdown');

  discordUsername.setAttribute('aria-haspopup', 'true');
  discordUsername.setAttribute('aria-expanded', 'false');
  discordAvatar.setAttribute('aria-haspopup', 'true');
  discordAvatar.setAttribute('aria-expanded', 'false');
  discordDropdown.setAttribute('role', 'menu');
  discordLogoutBtn.setAttribute('role', 'menuitem');

  function showDiscordProfile(user) {
    discordLoginBtn.style.display = 'none';
    discordProfile.classList.remove('hidden');
    discordUsername.textContent = user.username + (user.discriminator ? '#' + user.discriminator : '');
    discordAvatar.src = user.avatar
      ? `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png`
      : 'https://cdn.discordapp.com/embed/avatars/0.png';
  }

  // Dropdown logic: click to toggle
  let dropdownOpen = false;

  function toggleDropdown(e) {
    e.stopPropagation();
    dropdownOpen = !dropdownOpen;
    discordUsername.setAttribute('aria-expanded', dropdownOpen ? 'true' : 'false');
    discordAvatar.setAttribute('aria-expanded', dropdownOpen ? 'true' : 'false');
    if (dropdownOpen) {
      discordDropdown.classList.remove('dropdown-hidden');
      discordDropdown.classList.add('dropdown-visible');
      discordDropdown.querySelector('button').focus();
    } else {
      discordDropdown.classList.remove('dropdown-visible');
      discordDropdown.classList.add('dropdown-hidden');
    }
  }

  discordUsername.addEventListener('click', toggleDropdown);
  discordAvatar.addEventListener('click', toggleDropdown);

  // Keyboard accessibility for dropdown (Enter/Space)
  discordUsername.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
      toggleDropdown(e);
    }
  });
  discordAvatar.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
      toggleDropdown(e);
    }
  });

  // Hide dropdown on click outside
  document.addEventListener('click', function(e) {
    if (dropdownOpen && !discordProfile.contains(e.target)) {
      discordDropdown.classList.remove('dropdown-visible');
      discordDropdown.classList.add('dropdown-hidden');
      dropdownOpen = false;
      discordUsername.setAttribute('aria-expanded', 'false');
      discordAvatar.setAttribute('aria-expanded', 'false');
    }
  });

  // Logout button
  discordLogoutBtn.addEventListener('click', () => {
    sessionStorage.removeItem('discord_user');
    discordProfile.classList.add('hidden');
    document.getElementById('discordLoginBtn').style.display = '';
    dropdownOpen = false;
    discordDropdown.classList.remove('dropdown-visible');
    discordDropdown.classList.add('dropdown-hidden');
    discordUsername.setAttribute('aria-expanded', 'false');
    discordAvatar.setAttribute('aria-expanded', 'false');
  });

  if (discordLoginBtn) {
    discordLoginBtn.addEventListener('click', () => {
      window.location.href = DISCORD_AUTH_URL;
    });
  }

  // Page transition animation for internal links
  document.querySelectorAll('a[href]').forEach(link => {
    // Only animate for same-origin, non-anchor, non-blank links
    const isInternal = link.hostname === window.location.hostname && !link.target && !link.href.includes('#');
    if (isInternal) {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const fadePage = document.getElementById('fadePage');
        fadePage.classList.add('fade-out');
        setTimeout(() => {
          window.location.href = link.href;
        }, 350); // match transition duration
      });
    }
  });

  // On page load, fade in
  window.addEventListener('DOMContentLoaded', () => {
    document.getElementById('fadePage').classList.remove('fade-out');
    if (window.location.hash && window.location.hash.includes('access_token')) {
      const hash = window.location.hash.substr(1);
      const params = new URLSearchParams(hash);
      const accessToken = params.get('access_token');
      if (accessToken) {
        history.replaceState(null, '', window.location.pathname + window.location.search);
        fetch('https://discord.com/api/users/@me', {
          headers: { Authorization: `Bearer ${accessToken}` }
        })
        .then(res => res.json())
        .then(user => {
          showDiscordProfile(user);
          sessionStorage.setItem('discord_user', JSON.stringify(user));
        });
      }
    } else if (sessionStorage.getItem('discord_user')) {
      const user = JSON.parse(sessionStorage.getItem('discord_user'));
      showDiscordProfile(user);
    }
  });

  // ...rest of your script...
  </script>
</body>
</html>
